// Подключаем заголовочный файл нашего класса
#include "secondwindow.h"
// Подключаем автоматически сгенерированный UI-класс
// Файл ui_secondwindow.h создаётся из secondwindow.ui при компиляции
#include "ui_secondwindow.h"

// Конструктор SecondWindow
// Список инициализации (:) выполняется до тела конструктора
SecondWindow::SecondWindow(QWidget* parent)
    : QMainWindow(parent),  // Вызываем конструктор базового класса
      ui(new Ui::SecondWindow)  // Создаём объект UI в динамической памяти
{
    // setupUi() - метод из автогенерированного класса
    // Он создаёт все виджеты, описанные в .ui файле,
    // и размещает их в окне согласно дизайну
    ui->setupUi(this);

    // Подключаем сигнал clicked() от кнопки backButton к нашему слоту
    // connect() - функция Qt для связывания сигналов и слотов
    // Параметры:
    // 1. ui->backButton - объект, испускающий сигнал (кнопка)
    // 2. &QPushButton::clicked - указатель на сигнал (нажатие кнопки)
    // 3. this - объект, принимающий сигнал (наше окно)
    // 4. &SecondWindow::onBackButtonClicked - указатель на слот (наш метод)
    //
    // Новый синтаксис Qt5/Qt6 с указателями на функции-члены
    // Преимущества: проверка типов на этапе компиляции, автодополнение в IDE
    connect(ui->backButton, &QPushButton::clicked,
            this, &SecondWindow::onBackButtonClicked);
}

// Деструктор SecondWindow
SecondWindow::~SecondWindow() {
    // Удаляем UI-объект из памяти
    // Важно: виджеты, созданные через setupUi(), удаляются автоматически
    // как дочерние объекты окна, но сам ui-объект нужно удалить явно
    delete ui;
}

// Реализация слота для обработки нажатия кнопки "Назад"
void SecondWindow::onBackButtonClicked() {
    // emit - ключевое слово Qt для испускания сигнала
    // Оно не обязательно (можно просто вызвать backToFirstWindow()),
    // но делает код более читаемым - сразу видно, что это сигнал
    emit backToFirstWindow();

    // После испускания сигнала MainWindow получит уведомление
    // и выполнит соответствующие действия (покажет себя и скроет это окно)
}
